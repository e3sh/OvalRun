function SceneGameUI(){let t,e,n,o,c,i,r;this.step=function(a,s,l){t=l.ene,e=l.result,n=l.time,o=l.status.speed,c=l.laplist,i=!1,r=!1;for(let t in c)c[t].count>3&&(i=!0),c[0].count+c[0].par<c[t].count+c[t].par&&(r=!0)},this.draw=function(n){let a="";for(let e=1;e<t.now;e++)a+="A";n.font.std.putchr("PLAYER:"+a,0,448),n.font.std.putchr("STAGE :"+e.stage+" SCORE:"+Math.trunc(e.score),0,456),n.screen[1].fill(0,240,16,200,"yellowgreen"),n.screen[1].fill(1,241,14,198-o/30*198,"black"),n.font.std.putchr(Math.trunc(o)+" ",4,432);const s=200;let l=0;Boolean(c)&&(n.screen[1].fill(520,s,80,8*c.length,"black"),Boolean(c[0])&&(l=c[0].count+c[0].par));for(let t in c){const e=0==t?"PLAYER":"ENEMY ";n.screen[1].fill(560,s+8*t+6-c[t].count,38*c[t].par,1+c[t].count,l<c[t].count+c[t].par?"red":"limegreen"),n.font.std.putchr(e+" LAP:"+c[t].count,520,s+8*t)}i&&Math.trunc(n.time()/333)%2==0&&(n.screen[1].fill(290,184,66,8,r?"red":"black"),n.font.std.putchr("FINAL LAP",296,184))}}function SceneResult(){this.step=function(t,e){},this.draw=function(t){t.screen[1].fill(211,152,198,24,"black"),t.font.std.putchr("STAGE CLEAR",220,164,3),t.font.std.putchr("STAGE CLEAR",320,464)}}function SceneTitle(){let t;const e=["Thema  Spin/Roll (Donichi thread16)","","     OVAL RUN","","","","","","           START SPACE KEY","                     or GamePad Button X/A","","","","[Method of Operation]","STEERING  : Q,E or GamePad Button L/R","ACCELE    : W key or GamePad LeftAnalogStick UP","BLAKE     : S key or GamePad LeftAnalogStick DOWN","SHOT      : SPACE key or GamePad Button X/A"];this.step=function(e,n,o){t=n,delay=o.delay-e.time()<0;let c=!1;return delay&&n.trigger&&(c=!0),c},this.draw=function(t){for(let n in e)t.font.std.putchr(e[n],160,140+8*n)}}function SceneGameOver(){let t,e,n;this.step=function(o,c,i){if(t=i.stage,e=Math.trunc(i.score),n=i.delay-o.time()<0,n&&(o.sprite.itemFlash(),c.trigger))return!0},this.draw=function(t){t.screen[1].fill(208,152,216,32,"black"),t.font.std.putchr("GAME OVER",220,168,4),t.font.std.putchr(":"+(n?"OK":"WAIT"),320,456)}}function SceneDebug(){let t,e,n,o,c;this.step=function(i,r,a){t=a.block,e=i.deltaTime().toString().substring(0,5),n=a.collision,o=a.sprite,c=r},this.draw=function(t){t.font["8x8white"].putchr("DeltaT:"+e,540,0);let n=0!=c.x?c.x>0?"R":"L":"-",o=0!=c.y?c.y>0?"D":"U":"-",i=c.trigger?"T":"-",r=c.right?"S":"-";t.font["8x8green"].putchr("Input:"+o+":"+n+":"+i+":"+r,540,16)}}function SceneGPad(){let t;this.step=function(e,n,o){t=e.gamepad.infodraw();let c=n.keycode,i="";for(let t in c)Boolean(c[t])&&(i+="["+t+"]");t.push(""),t.push("[Keyboard]"),t.push(i)},this.draw=function(e){for(let n in t)e.font.std.putchr(t[n],0,48+8*n)}}function SceneVGPad(){let t;this.step=function(e,n,o){let c=e.vgamepad.check();t=[],t.push("state button:"+c.button),t.push("state deg   :"+c.deg),t.push("state distance:"+c.distance)},this.draw=function(e){e.vgamepad.draw(e.screen[1]);let n={draw:function(t){t.beginPath(),t.globalAlpha=1}};e.screen[1].putFunc(n);for(let e in t);}}