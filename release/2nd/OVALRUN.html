<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <script type="text/javascript">
function Beepcore(){const A=["sine","square","sawtooth","triangle"];window.AudioContext=window.AudioContext||window.webkitAudioContext;let t=.2,e=A[0],i=null,n=[];function s(){const A=new AudioContext,t=A.createOscillator(),e=A.createGain();let i,n,s;e.gain.value=0,t.connect(e).connect(A.destination),this.living=!1,this.busy=!1;const h=[{name:"A0",Freq:27.5},{name:"A#0",Freq:29.135},{name:"B0",Freq:30.868},{name:"C1",Freq:32.703},{name:"C#1",Freq:34.648},{name:"D1",Freq:36.708},{name:"D#1",Freq:38.891},{name:"E1",Freq:41.203},{name:"F1",Freq:43.654},{name:"F#1",Freq:46.249},{name:"G1",Freq:48.999},{name:"G#1",Freq:51.913},{name:"A1",Freq:55},{name:"A#1",Freq:58.27},{name:"B1",Freq:61.735},{name:"C2",Freq:65.406},{name:"C#2",Freq:69.296},{name:"D2",Freq:73.416},{name:"D#2",Freq:77.782},{name:"E2",Freq:82.407},{name:"F2",Freq:87.307},{name:"F#2",Freq:92.499},{name:"G2",Freq:97.999},{name:"G#2",Freq:103.826},{name:"A2",Freq:110},{name:"A#2",Freq:116.541},{name:"B2",Freq:123.471},{name:"C3",Freq:130.813},{name:"C#3",Freq:138.591},{name:"D3",Freq:146.832},{name:"D#3",Freq:155.563},{name:"E3",Freq:164.814},{name:"F3",Freq:174.614},{name:"F#3",Freq:184.997},{name:"G3",Freq:195.998},{name:"G#3",Freq:207.652},{name:"A3",Freq:220},{name:"A#3",Freq:233.082},{name:"B3",Freq:246.942},{name:"C4",Freq:261.626},{name:"C#4",Freq:277.183},{name:"D4",Freq:293.665},{name:"D#4",Freq:311.127},{name:"E4",Freq:329.628},{name:"F4",Freq:349.228},{name:"F#4",Freq:369.994},{name:"G4",Freq:391.995},{name:"G#4",Freq:415.305},{name:"A4",Freq:440},{name:"A#4",Freq:466.164},{name:"B4",Freq:493.883},{name:"C5",Freq:523.251},{name:"C#5",Freq:554.365},{name:"D5",Freq:587.33},{name:"D#5",Freq:622.254},{name:"E5",Freq:659.255},{name:"F5",Freq:698.456},{name:"F#5",Freq:739.989},{name:"G5",Freq:783.991},{name:"G#5",Freq:830.609},{name:"A5",Freq:880},{name:"A#5",Freq:932.328},{name:"B5",Freq:987.767},{name:"C6",Freq:1046.502},{name:"C#6",Freq:1108.731},{name:"D6",Freq:1174.659},{name:"D#6",Freq:1244.508},{name:"E6",Freq:1318.51},{name:"F6",Freq:1396.913},{name:"F#6",Freq:1479.978},{name:"G6",Freq:1567.982},{name:"G#6",Freq:1661.219},{name:"A6",Freq:1760},{name:"A#6",Freq:1864.655},{name:"B6",Freq:1975.533},{name:"C7",Freq:2093.005},{name:"C#7",Freq:2217.461},{name:"D7",Freq:2349.318},{name:"D#7",Freq:2489.016},{name:"E7",Freq:2637.02},{name:"F7",Freq:2793.826},{name:"F#7",Freq:2959.955},{name:"G7",Freq:3135.963},{name:"G#7",Freq:3322.438},{name:"A7",Freq:3520},{name:"A#7",Freq:3729.31},{name:"B7",Freq:3951.066},{name:"C8",Freq:4186.009}];this.init=function(e=440,s="sine",h=null,a=.2){if(i=a,t.type=s,t.frequency.value=e,null!==h){const e=A.createOscillator(),i=A.createGain();i.gain.value=h.depth,e.type=h.wavetype,e.frequency.value=h.Freq,e.connect(i).connect(t.frequency),e.start()}this.living=!0,n=[]},this.on=function(A=1,n=0){e.gain.value=A*i,t.start(n)},this.changeVol=function(A=1){e.gain.value=A*i},this.changeFreq=function(A){t.frequency.value=A},this.off=function(A){t?.stop(A),this.living=!1},this.suspend=function(){e.gain.value=0,t.frequency.value=0},this.play=function(A,t){n=A;for(let A in n)Boolean(n[A].name)&&(n[A].Freq=e(n[A].name));function e(A){let t=0;for(let e in h)if(A==h[e].name){t=h[e].Freq;break}return t}s=t,this.busy=!0},this.step=function(A){let t=0,e=0,i=0;for(let h in n){let a=n[h];i+=a.time;let o=A-s;a.use||(e<o&&i>o&&(this.changeVol(a.Vol),this.changeFreq(a.Freq),a.use=!0),t++),e=i}0==t&&(this.suspend(),n=[],this.busy=!1)}}this.createNote=function(A){let h=new s;return h.init(A,e,i,t),n.push(h),h},this.oscSetup=function(t){e=A[t]},this.lfoSetup=function(t,e,n){i={Freq:t,wavetype:A[e],depth:n}},this.lfoReset=function(){i=null},this.masterVolume=function(A=.2){t=A},this.step=function(A){for(let t in n)n[t].living?n[t].step(A):n.splice(t,1)},this.makeScore=function(A,t=100,e=1){let i=[];for(let n in A){let s={name:A[n],Freq:0,Vol:e,time:t,use:!1};i.push(s)}return i.push({Freq:0,Vol:0,time:100,use:!1}),i}}function DisplayControl(A,t,e,i,n,s="use"){var h;h="undefined"!=typeof OffscreenCanvas&&"use"==s?new offScreenTypeC(t,e,i,n):new offScreen,this.buffer=h;var a=A;this.cw=t,this.ch=e,a.font="16px 'Arial'",this.lighter_enable=!0,this.view=h.view,this.flip=h.flip;var o=1,r="";this.setInterval=function(A){0==A?h.flip(!1):h.flip(!0),o=A},this.setBackgroundcolor=function(A){r=A,this.backgroundcolor=r},this.getInterval=function(){return o},this.getBackgroundcolor=function(){return r},this.putPattern=function(A,t,e,i,n,s){h.drawImgXYWHXYWH(A,t.x,t.y,t.w,t.h,e,i,n,s)},this.setBgPattern=function(A){bg_ptn=A},this.print=function(A,t,e,i){Boolean(i)||(i="limegreen"),h.fillText(A,t,e,i)},this.putImage=function(A,t,e){h.drawImgXY(A,t,e)},this.putImage2=function(A,t,e,i,n){h.drawImgXYWH(A,t,e,i,n)},this.putImageTransform=function(A,t,e,i,n,s,a){h.putImageTransform(A,t,e,i,n,s,a)},this.transform=function(A,t,e,i){h.Transform(A,t,e,i,0,0)},this.putFunc=function(A){h.putFunc(A)},this.clear=function(A){this.flip()&&(h.allClear(0,0,t,e),void 0===A&&(A=r),Boolean(A)&&h.fillRect(0,0,t,e,A))},this.fill=function(A,t,e,i,n){h.fillRect(A,t,e,i,n)},this.reset=function(){h.reset()},this.reflash=function(){h.reflash()},this.draw=function(){h.draw(a)},this.count=function(){return h.count()},this.max=function(){return h.max()}}function fontPrintControl(A,t,e,i,n,s,h){var a=A.screen[0].buffer;this.useScreen=function(t){a=A.screen[t].buffer};const o=t,r=n;var l=[];const c=function(){const A=[],t=[["ADABMAIwDP8O//swGv8b/x//Af+bMJwwtABA/6gAPv/j/z///TD+MJ0wnjADMN1OBTAGMAcw/DAVIBAgD/9cABwwFiBc/yYgJSAYIBkgHCAdIAj/Cf8UMBUwO/89/1v/Xf8IMAkwCjALMAwwDTAOMA8wEDARMAv/EiKxANcA9wAd/2AiHP8e/2YiZyIeIjQiQiZAJrAAMiAzIAMh5f8E/6IAowAF/wP/Bv8K/yD/pwAGJgUmyyXPJc4lxyU="],["xiWhJaAlsyWyJb0lvCU7IBIwkiGQIZEhkyETMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIIgsihiKHIoIigyIAAAAAAAAAAAAAAAAAAAAAAAAAACciKCKsANIh1CEAIgMiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASIwIiByIAAAAAaiJrIgAAPSIdIgAAAAAsIgAAAAAAAAAAAAAAAAAAKyEwIG8mbSZqJiAgISC2AAAAAAAAAAAA7yU="]];for(let i in t)A.push(e(t[i]));return A;function e(A){const t=atob(A),e=(i=t,Uint8Array.from(i,(A=>A.charCodeAt(0))));var i;return new Uint16Array(e.buffer)}}();for(let A in c)for(let t in c[A])0!=c[A][t]&&(l[c[A][t]]={x:t,y:A});function u(A){let t,n,a,c,u,f=!1;if(a=4,c=12,u=0,A<128&&(t=Math.floor(A%16)*e,n=Math.floor(A/16)*i,a=e,c=i,u=0),A>=parseInt("FF60",16)&&A<=parseInt("FF9F",16)){let s=A-parseInt("FF60",16);t=Math.floor(s%16)*e,n=Math.floor(s/16)*i+10*i,a=e,c=i,u=1}void 0!==l[A]&&(t=l[A].x*s,n=l[A].y*h,a=s,c=h,f=!0,u=2);let m={};return m.img=f?r:o,m.x=t,m.y=n,m.w=a,m.h=c,m.type=u,m}this.print=function(A,t,e){for(let i=0,n=A.length;i<n;i++){let n=u(A.charCodeAt(i));a.drawImgXYWHXYWH(n.img,n.x,n.y,n.w,n.h,t,e,n.w,n.h),t+=n.w}},this.putchr=function(A,t,e,i){Boolean(i)||(i=1);for(var n=0,s=A.length;n<s;n++){let s=u(A.charCodeAt(n)),h=t,o=e;a.drawImgXYWHXYWH(s.img,s.x,s.y,s.w-1,s.h-1,h,o,Math.floor(s.w*i),Math.floor(s.h*i)),t+=s.w*i}}}function GameAssetManager(){var A=[];this.imageLoad=function(t,e){return A[t]=new ImageAsset(e),A[t].img},this.image=A,ImageAsset=function(A){this.uri=A,this.ready=!1,this.img=new Image,this.img.src=A,this.loadcheck=function(){return this.ready=this.img.complete,this.img.complete}};var t=[];this.soundLoad=function(A,e){return t[A]=new AudioAsset(e),t[A].sound},this.sound=t,AudioAsset=function(A){var t=".mp3";"probably"==(new Audio).canPlayType("audio/ogg")&&(t=".ogg"),this.ready=!1,this.sound=new Audio(A+t),this.sound.addEventListener("loadeddata",(function(A){this.ready=!0})),this.uri=A+t,this.pos=0,this.loadcheck=function(){return this.ready=0!=this.sound.readyState,this.sound.readyState}},this.check=function(){var e=[];for(var i in A){var n=A[i].uri.split("/",20);e.push("["+i+"] "+n[n.length-1]+" "+(A[i].loadcheck()?"o":"x"))}var s=["Noting","Mata","Current","Future","Ok"];for(var i in t){n=t[i].uri.split("/",20);var h=t[i].loadcheck();e.push("["+i+"] "+n[n.length-1]+" "+h+"/"+s[h])}return e},this.namelist=function(){var e=[];for(var i in A){A[i].uri.split("/",20);e.push(i)}for(var i in t){t[i].uri.split("/",20);e.push(i)}return e}}function GameCore(A){let t=0,e=Date.now();window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(A,i){t++,t>60&&(t=1,e=Date.now());let n=e+Math.round(t*(1e3/60))-Date.now();n<=0&&(n=1),setTimeout(A,n)};let i=!1,n=new GameTaskControl(this),s=new inputKeyboard,h=new inputMouse,a=new inputGamepad,o=new inputTouchPad(A.canvasId),r=new inputVirtualPad(h,o),l=new Beepcore,c=[],u=A.screen[0].resolution.w,f=A.screen[0].resolution.h,m=document.getElementById(A.canvasId);m.width=u,m.height=f,this.systemCanvas=m;let d=m.getContext("2d");for(let t in A.screen){let e=A.screen[t];c[t]=new DisplayControl(d,e.resolution.w,e.resolution.h,e.resolution.x,e.resolution.y,A.offscreen)}let p=new viewport;p.size(u,f),p.border(u/2,f/2),p.setPos(0,0),p.repeat(!1);let F=new GameSpriteControl(this),g=[];this.setSpFont=function(A){let t=new GameSpriteFontControl(this,{Image:Y.image[A.id].img,pattern:A.pattern});g[A.name]=t};let Y=new GameAssetManager,V=new soundControl(Y),Z=A.screen.length,b=new function(){let A,t,e,i,n=[],s=[],h=0,a=0,o=0,r=0,l=0,c=0;this.start=function(){A=t,t=performance.now()},this.end=function(){e=performance.now()-t,i=t-A,h>a&&(a=h),n[h]=i,s[h]=e,h++,h>59&&(h=0);let r=0;for(let A=0;A<=a;A++)r+=n[A];o=1e3/(r/(a+1))},this.result=function(){let A=0,t=999,e=0,i=0,h=999,r=0,l=0,c=0;for(let e=0;e<=a;e++)A<n[e]&&(A=n[e]),t>n[e]&&(t=n[e]),i<s[e]&&(i=s[e]),h>s[e]&&(h=s[e]),l+=s[e],c+=n[e];e=c/(a+1),r=l/(a+1);let u={};u.fps=o;let f={};f.log=n,f.max=i,f.min=h,f.ave=r;let m={};return m.log=n,m.max=A,m.min=t,m.ave=e,u.interval=m,u.workload=f,u},this.setTime=function(A){l=r,r=A,c+=r-l,c>1500&&(c=0)},this.readTime=function(){return r-l},this.nowTime=function(){return r},this.blink=function(){return c<500}},y=[];for(let A=0;A<Z;A++)y[A]=0;function w(A){if(i){b.setTime(A),b.start(),n.step(),l.step(A);for(let A=0;A<Z;A++)c[A].getInterval()-y[A]==1&&(c[A].reflash(),c[A].clear());n.draw(),F.allDrawSprite();for(let A=0;A<Z;A++)c[A].draw();b.end();for(let A=0;A<Z;A++)y[A]++,y[A]>=c[A].getInterval()&&(y[A]=0);requestAnimationFrame(arguments.callee)}}this.task=n,this.asset=Y,this.keyboard=s,this.mouse=h,this.gamepad=a,this.joystick=a,this.touchpad=o,this.vgamepad=r,this.dsp=c[0],this.screen=c,this.viewport=p,this.sound=V,this.beep=l,this.sprite=F,this.font=g,this.state={},this.fpsload=b,this.deltaTime=b.readTime,this.time=b.nowTime,this.blink=b.blink,F.useScreen(0),this.run=function(){i=!0,requestAnimationFrame(w)},this.pause=function(){i=!1}}class GameTask{id;enable;visible;preFlag;constructor(A){this.id=A,this.enable=!0,this.visible=!0,this.preFlag=!1}init(A){}pre(A){}step(A){}draw(A){}post(A){}}function GameTaskControl(A){var t=[],e=0,i="";function n(){for(var A in e=0,i="",t)i+=A+" ",e++}this.read=function(A){return t[A]},this.add=function(e){t[e.id]=e,e.init(A),n()},this.del=function(A){t[A].post(),delete t[A],n()},this.init=function(e){t[e].init(A)},this.step=function(){for(var e in t){var i=t[e];i.preFlag||(i.pre(A),i.preFlag=!0),i.enable&&i.step(A)}},this.draw=function(){for(var e in t){var i=t[e];i.visible&&i.draw(A)}},this.count=function(){return e},this.namelist=function(){return i}}function inputGamepad(){let A,t=window.Gamepad,e=navigator.getGamepads;this.upkey,this.downkey,this.leftkey=!1,this.rightkey=!1,this.btn_start=!1,this.btn_back=!1,this.btn_lb=!1,this.btn_rb=!1,this.btn_lt=!1,this.btn_rt=!1,this.btn_l3=!1,this.btn_r3=!1,this.btn_a=!1,this.btn_b=!1,this.btn_x=!1,this.btn_y=!1,this.r,this.ls_x,this.ls_y,this.rs_x,this.rs_y;let i=!1;this.button,this.axes,this.check=function(){if(i=!1,!t||!e)return!1;A=navigator.getGamepads();let n=[];for(let t in A)Boolean(A[t])&&n.push(t);let s=Math.min(...n),h=A[s];return!!h&&(i=!0,this.update(h),i)},this.update=function(A){var t=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],e=A.buttons,i=A.axes;this.button=e,this.axes=i,this.upkey=!!Boolean(e[t[12]])&&e[t[12]].pressed,this.downkey=!!Boolean(e[t[13]])&&e[t[13]].pressed,this.leftkey=!!Boolean(e[t[14]])&&e[t[14]].pressed,this.rightkey=!!Boolean(e[t[15]])&&e[t[15]].pressed,this.btn_start=!!Boolean(e[t[9]])&&e[t[9]].pressed,this.btn_back=!!Boolean(e[t[8]])&&e[t[8]].pressed,this.btn_lb=!!Boolean(e[t[4]])&&e[t[4]].pressed,this.btn_rb=!!Boolean(e[t[5]])&&e[t[5]].pressed,this.btn_lt=!!Boolean(e[t[6]])&&e[t[6]].pressed,this.btn_rt=!!Boolean(e[t[7]])&&e[t[7]].pressed,this.btn_l3=!!Boolean(e[t[10]])&&e[t[10]].pressed,this.btn_r3=!!Boolean(e[t[11]])&&e[t[11]].pressed,this.btn_a=!!Boolean(e[t[0]])&&e[t[0]].pressed,this.btn_b=!!Boolean(e[t[1]])&&e[t[1]].pressed,this.btn_x=!!Boolean(e[t[2]])&&e[t[2]].pressed,this.btn_y=!!Boolean(e[t[3]])&&e[t[3]].pressed,this.ls_x=Boolean(i[0])?i[0]:0,this.ls_y=Boolean(i[1])?i[1]:0,this.rs_x=Boolean(i[2])?i[2]:0,this.rs_y=Boolean(i[3])?i[3]:0;var n,s,h=Math.floor(100*i[0]),a=Math.floor(100*i[1]);this.r=Math.abs(h)<10&&Math.abs(a)<10?-1:(s=100*a,0==(n=100*h)?s>=0?180:0:Math.atan(s/n)*(180/Math.PI)+(n>=0?90:270))},this.infodraw=function(){let t=[];t.push("[Gamepad] max:"+A.length);let e=[];for(let i in A)Boolean(A[i])?(t.push("no:"+i+", type:"+A[i].mapping),t.push("id:"+A[i].id),e.push(i)):t.push("no."+i+" not Connect");t.push("--------------------------------");let i=Math.min(...e);if(A[i]){let e=A[i];t.push("Use No:"+i+", type:"+e.mapping),t.push("id:"+e.id),t.push(""),t.push("Up   ["+(this.upkey?"o":"-")+"] Down ["+(this.downkey?"o":"-")+"] Left ["+(this.leftkey?"o":"-")+"] Right["+(this.rightkey?"o":"-")+"]"),t.push(""),t.push("(A)  ["+(this.btn_a?"o":"-")+"] (B)  ["+(this.btn_b?"o":"-")+"] (X)  ["+(this.btn_x?"o":"-")+"] (Y)  ["+(this.btn_y?"o":"-")+"]"),t.push(""),t.push("BACK ["+(this.btn_back?"o":"-")+"] START["+(this.btn_start?"o":"-")+"]"),t.push("LB   ["+(this.btn_lb?"o":"-")+"] RB   ["+(this.btn_rb?"o":"-")+"]"),t.push("LT   ["+(this.btn_lt?"o":"-")+"] RT   ["+(this.btn_rt?"o":"-")+"]"),t.push("L3   ["+(this.btn_l3?"o":"-")+"] R3   ["+(this.btn_r3?"o":"-")+"]"),t.push(""),t.push("r = "+this.r),t.push(""),t.push("Ls_x: "+this.ls_x),t.push("Ls_y: "+this.ls_y),t.push("Rs_x: "+this.rs_x),t.push("Rs_y: "+this.rs_y)}else t.push("Not Ready.");return t}}function inputKeyboard(){var A=[];this.upkey=!1,this.downkey=!1,this.leftkey=!1,this.rightkey=!1,this.shift=!1,this.ctrl=!1,this.alt=!1,this.space=!1,this.qkey=!1,this.wkey=!1,this.ekey=!1,this.akey=!1,this.skey=!1,this.dkey=!1,this.zkey=!1,this.xkey=!1,this.ckey=!1,window.addEventListener("blur",(function(t){A=[]}),!1),window.addEventListener("keydown",(function(t){A[t.keyCode]=!0}),!1),window.addEventListener("keyup",(function(t){A[t.keyCode]=!1}),!1),this.check=function(){for(var t in function(){this.upkey=!1,this.downkey=!1,this.leftkey=!1,this.rightkey=!1,this.shift=!1,this.ctrl=!1,this.space=!1,this.qkey=!1,this.wkey=!1,this.ekey=!1,this.akey=!1,this.skey=!1,this.dkey=!1,this.zkey=!1,this.xkey=!1,this.ckey=!1}(),A)switch(t){case"16":this.shift=A[16];break;case"17":this.ctrl=A[17];break;case"18":this.alt=A[18];break;case"32":this.space=A[32];break;case"38":this.upkey=A[38];break;case"40":this.downkey=A[40];break;case"37":this.leftkey=A[37];break;case"39":this.rightkey=A[39];break;case"65":this.akey=A[65];break;case"67":this.ckey=A[67];break;case"68":this.dkey=A[68];break;case"69":this.ekey=A[69];break;case"81":this.qkey=A[81];break;case"83":this.skey=A[83];break;case"87":this.wkey=A[87];break;case"88":this.xkey=A[88];break;case"90":this.zkey=A[90];break;default:break}return A},this.state=function(){return A}}function inputMouse(){var A={x:0,y:0,button:0,wheel:0},t=0,e=0,i=-1,n=0,s=document;s.addEventListener("mousemove",(function(A){t=A.clientX,e=A.clientY}),!1),s.addEventListener("mousedown",(function(A){i=A.button}),!1),s.addEventListener("mouseup",(function(A){i=-1}),!1),s.addEventListener("mousewheel",(function(A){n=A.wheelDelta}),!1),s.addEventListener("DOMMouseScroll",(function(A){n=A.detail}),!1),this.check=function(){return A.x=t,A.y=e,A.button=i,A.wheel=n,0!=i&&(i=-1),n=0,A},this.check_last=function(){return A.x=t,A.y=e,A.button=i,A.wheel=n,A},this.draw=function(A){var t=this.check_last(),e={};e.x=t.x,e.y=t.y,e.draw=function(A){var t=A;t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.x+10,this.y+10),t.globalAlpha=1,t.strokeStyle="white",t.lineWidth=3,t.stroke()},A.putFunc(e)}}function inputTouchPad(A){var t=[],e=document.getElementById(A);this.o_Left=e.offsetLeft,this.o_Top=e.offsetTop;var i=!1;function n(A){A.preventDefault(),h(A),i=!0}function s(A){A.preventDefault(),h(A),i=!1}function h(A){if(t=[],A.touches.length>0)for(var e=0;e<A.touches.length;e++){var i=A.touches[e];t[e]={},t[e].x=i.pageX,t[e].y=i.pageY,t[e].id=i.identifier}}document.addEventListener("touchstart",n,{passive:!1}),document.addEventListener("touchmove",n,{passive:!1}),document.addEventListener("touchend",s,{passive:!1}),document.addEventListener("touchcancel",s,{passive:!1}),this.check=function(){var A={};return A.pos=t,A},this.check_last=function(){var A={};return A.pos=t,A},this.draw=function(A){if(i){this.check_last();for(var e="p "+t.length+"/",n=0;n<=t.length-1;n++){e=e+"b"+n+" ";var s={};s.x=t[n].x,s.y=t[n].y,s.r=16,s.draw=function(A){var t=A;t.beginPath(),t.arc(this.x,this.y,this.r,0,2*Math.PI,!0),t.strokeStyle="white",t.lineWidth=2,t.stroke()},A.putFunc(s)}}}}function inputVirtualPad(A,t){for(var e={X:80,Y:320,R:75},i=[],n=0;n<=1;n++)i[n]={},i[n].X=440+80*(n+1),i[n].Y=320,i[n].R=28,i[n].ON=!1;for(n=0;n<=1;n++)i[n+2]={},i[n+2].X=560,i[n+2].Y=280+80*n,i[n+2].R=28,i[n+2].ON=!1;var s=[],h=0,a=[],o=-1,r=!1;function l(A,t,e,i){var n,s=e-A,h=i-t;return 0==s?n=h>=0?180:0:(n=function(A){return A*(180/Math.PI)}(Math.atan(h/s)),s>=0&&h>=0&&(n=90+n),s>=0&&h<0&&(n=90+n),s<0&&h<0&&(n=270+n),s<0&&h>=0&&(n=270+n)),n}function c(A,t,e,i){return Math.floor(Math.sqrt(Math.pow(Math.abs(A-e),2)+Math.pow(Math.abs(t-i),2)))}this.check=function(){var n=t.check_last(),u=A.check_last();s=[],n.pos.length<=0?-1!=u.button?(s.push({x:u.x,y:u.y}),r=!0):r=!1:(s=n.pos,r=!0),h=0,a=[];for(var f=0;f<=m;f++)a[f]=!1;o=-1;var m=i.length-1,d=0,p=-1;if(s.length>0)for(var F=0;F<s.length;F++){var g=c(s[F].x,s[F].y,e.X,e.Y);e.R>g&&(d=Math.floor(l(e.X,e.Y,s[F].x,s[F].y)),p=g);for(f=0;f<=m;f++)i[f].R>c(i[f].X,i[f].Y,s[F].x,s[F].y)&&(a[f]=!0)}h=d,o=p;var Y={};return Y.button=a,Y.deg=d,Y.distance=p,Y},this.check_last=function(){var A={};return A.button=a,A.deg=h,A.distance=o,A},this.draw=function(A){if(r){var t=this.check_last(),n=i.length-1;(o={}).x=e.X,o.y=e.Y,o.r=e.R,o.bt=i,o.draw=function(A){var t=A;t.beginPath(),t.arc(this.x,this.y,this.r,0,2*Math.PI,!0),t.fillStyle="gray",t.globalAlpha=.5,t.fill();for(var e=0;e<=this.bt.length-1;e++)t.beginPath(),t.arc(this.bt[e].X,this.bt[e].Y,this.bt[e].R,0,2*Math.PI,!0),t.fillStyle="gray",t.fill()},A.putFunc(o);var h="p "+s.length+"/";if(t.distance>0)h=h+"d "+t.deg+":"+t.distance,(o={}).x=e.X,o.y=e.Y,o.vx=Math.cos(ToRadian(t.deg-90))*e.R,o.vy=Math.sin(ToRadian(t.deg-90))*e.R,o.sr=(t.deg+225)%360/180*Math.PI,o.draw=function(A){var t=A;t.beginPath(),t.strokeStyle="orange",t.lineWidth=60,t.arc(this.x,this.y,40,this.sr,this.sr+.5*Math.PI,!1),t.stroke()},A.putFunc(o);for(var a=0;a<=n;a++){var o;if(t.button[a])h=h+"b"+a+" ",(o={}).x=e.X,o.y=e.Y,o.r=e.R,o.bt=i[a],o.draw=function(A){var t=A;t.beginPath(),t.arc(this.bt.X,this.bt.Y,this.bt.R-5,0,2*Math.PI,!0),t.fillStyle="orange",t.fill()},A.putFunc(o)}}},ToRadian=A=>A*(Math.PI/180)}function offScreen(){for(var A=4e3,t=0,e=[],i=0;i<A;i++)e[i]=new g;var n=[],s=0;function h(){return++t>=A&&(t=0),e[t]}var a=!0,o=!0;this.view=function(A){return"boolean"==typeof A&&(a=A),a},this.flip=function(A){return"boolean"==typeof A&&(o=A),a},this.spPut=function(A,t,e,i,s,a,o,l,c,u,f,m,d,p,F,g,Y){var V=h();V.img=A,V.sx=t,V.sy=e,V.sw=i,V.sh=s,V.dx=a,V.dy=o,V.dw=l,V.dh=c,V.m11=u,V.m12=f,V.m21=m,V.m22=d,V.tx=p,V.ty=F,V.alpha=g,V.r=Y,V.mode=r,n[n.length]=V},this.drawImgXYWHXYWH=function(A,t,e,i,s,a,o,r,c){var u=h();u.img=A,u.sx=t,u.sy=e,u.sw=i,u.sh=s,u.dx=a,u.dy=o,u.dw=r,u.dh=c,u.mode=l,n[n.length]=u},this.fillText=function(A,t,e,i){Boolean(i)||(i="limegreen");var s=h();s.text=A,s.sx=t,s.sy=e,s.color=i,s.mode=f,n[n.length]=s},this.drawImgXY=function(A,t,e){var i=h();i.img=A,i.sx=t,i.sy=e,i.mode=u,n[n.length]=i},this.drawImgXYWH=function(A,t,e,i,s){var a=h();a.img=A,a.sx=t,a.sy=e,a.sw=i,a.sh=s,a.mode=c,n[n.length]=a},this.putImageTransform=function(A,t,e,i,s,a,o){var r=h();r.img=A,r.tx=t,r.ty=e,r.m11=i,r.m12=s,r.m21=a,r.m22=o,r.mode=m,n[n.length]=r},this.transform=function(A,t,e,i){var s=h();s.m11=A,s.m12=t,s.m21=e,s.m22=i,s.mode=d,n[n.length]=s},this.putFunc=function(A){n[n.length]=A},this.allClear=function(A,t,e,i){var s=h();s.sx=A,s.sy=t,s.sw=e,s.sh=i,s.mode=p,n[n.length]=s},this.fillRect=function(A,t,e,i,s){var a=h();a.sx=A,a.sy=t,a.sw=e,a.sh=i,a.color=s,a.mode=F,n[n.length]=a},this.reset=function(){n.length>A&&(n.length=0),n=[],t=0},this.reflash=function(){o&&this.reset()},this.draw=function(A){if(a){for(var t=0,e=n.length;t<e;t++)n[t].draw(A);s<n.length&&(s=n.length)}},this.count=function(){return n.length},this.max=function(){return s};var r=1,l=2,c=3,u=4,f=5,m=6,d=7,p=8,F=9;function g(){this.img,this.text,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh,this.color,this.m11,this.m12,this.m21,this.m22,this.tx,this.ty,this.alpha,this.r,this.mode}g.prototype.func=[],g.prototype.func[0]=function(A){},g.prototype.func[r]=function(A){A.save(),A.setTransform(this.m11,this.m12,this.m21,this.m22,this.tx,this.ty),0!=this.r&&A.rotate(Math.PI/180*this.r),255==this.alpha?A.globalCompositeOperation="source-over":A.globalAlpha=this.alpha*(1/255),A.drawImage(this.img,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh),A.restore()},g.prototype.func[l]=function(A){A.drawImage(this.img,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh)},g.prototype.func[c]=function(A){A.drawImage(this.img,this.sx,this.sy,this.sw,this.sh)},g.prototype.func[u]=function(A){A.drawImage(this.img,this.sx,this.sy)},g.prototype.func[f]=function(A){A.fillStyle=this.color,A.fillText(this.text,this.sx,this.sy)},g.prototype.func[m]=function(A){A.save(),A.setTransform(this.m11,this.m12,this.m21,this.m22,this.tx,this.ty),A.drawImage(this.img,0,0),A.restore()},g.prototype.func[d]=function(A){},g.prototype.func[p]=function(A){},g.prototype.func[F]=function(A){Boolean(this.color)?(A.fillStyle=this.color,A.fillRect(this.sx,this.sy,this.sw,this.sh)):A.clearRect(this.sx,this.sy,this.sw,this.sh)},g.prototype.draw=function(A){this.func[this.mode].call(this,A)}}function offScreenTypeC(A,t,e,i){let n=new OffscreenCanvas(A,t);const s=e,h=i;let a=n.getContext("2d"),o=!0,r=!0,l=!1,c=0;this.view=function(A){return"boolean"==typeof A&&(o=A),o},this.flip=function(A){return"boolean"==typeof A&&(r=A),o},this.turn=function(A){l&&(c=A)},this._2DEF=function(e){l=e,e?(n=new OffscreenCanvas(2*A,2*t),a=n.getContext("2d"),a.translate(A/2,t/2)):(n=new OffscreenCanvas(A,t),a=n.getContext("2d"),a.translate(0,0))},this.spPut=function(e,i,n,s,h,o,r,c,u,f,m,d,p,F,g,Y,V){a.save(),l&&(F+=A/2,g+=t/2),a.setTransform(f,m,d,p,F,g),0!=V&&a.rotate(Math.PI/180*V),255==Y?a.globalCompositeOperation="source-over":a.globalAlpha=Y*(1/255),a.drawImage(e,i,n,s,h,o,r,c,u),a.restore()},this.drawImgXYWHXYWH=function(A,t,e,i,n,s,h,o,r){a.drawImage(A,t,e,i,n,s,h,o,r)},this.fillText=function(A,t,e,i){Boolean(i)||(i="limegreen"),a.fillStyle=i,a.fillText(A,t,e)},this.drawImgXY=function(A,t,e){a.drawImage(A,t,e)},this.drawImgXYWH=function(A,t,e,i,n){a.drawImage(A,t,e,i,n)},this.putImageTransform=function(A,t,e,i,n,s,h){a.save(),a.setTransform(i,n,s,h,t,e),a.drawImage(A,0,0),a.restore()},this.transform=function(A,t,e,i){},this.putFunc=function(A){A.draw(a)},this.allClear=function(A,t,e,i){a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(A,t,e,i),a.restore()},this.fillRect=function(A,t,e,i,n){Boolean(n)?(a.fillStyle=n,a.fillRect(A,t,e,i)):a.clearRect(A,t,e,i)},this.reset=function(){r&&this.allClear(0,0,A,t)},this.reflash=function(){r&&this.reset()},this.draw=function(A){if(o)if(l){let t=n.width,e=n.height;A.fillStyle="navy",A.fillRect(0,0,t/2,e/2),A.save(),A.translate(t/4,e/4),A.rotate(Math.PI/180*(c%360)),A.drawImage(n,s-t/2,h-e/2),A.restore(),a.fillStyle="navy",a.fillRect(-t/4,-e/4,t,e)}else A.drawImage(n,s,h)},this.count=function(){return"mode"},this.max=function(){return"C"}}function soundControl(A){var t=A.sound;this.play=function(A){var e=t[A].sound;e.ended&&(e.currentTime=0),e.play()},this.effect=function(A){Boolean(t[A])&&(t[A].sound.currentTime=0,t[A].sound.play())},this.running=function(A){return!t[A].ended},this.info=function(A){var e=t[A];return e.currentTime/e.duration*100},this.restart=function(A){t[A].currentTime=0},this.volume=function(A,e){t[A].volume=e}}function GameSpriteControl(A){let t,e,i=[],n=[],s=!0;function h(){function e(A){this.alive--,this.x+=this.vx*(A/(1e3/60)),this.y+=this.vy*(A/(1e3/60)),this.alive<=0?this.visible=!1:this.visible=!0}this.x=0,this.y=0,this.r=0,this.z=0,this.vx=0,this.vy=0,this.priority=0,this.collisionEnable=!0,this.collision={w:0,h:0},this.id="",this.count=0,this.pcnt=0,this.visible=!1,this.hit=[],this.alive=0,this.index=0,this.living=!0,this.normalDrawEnable=!0,this.beforeCustomDraw=!1,this.customDraw=function(A,t){},this.moveFunc,this.view=function(){this.visible=!0},this.hide=function(){this.visible=!1},this.pos=function(A,t,e=0,i=0){this.x=A,this.y=t,this.r=e,this.z=i},this.move=function(A,t,e){this.visible=!0;let i=(A-90)*(Math.PI/180);this.vx=Math.cos(i)*t,this.vy=Math.sin(i)*t,this.r=A,this.alive=e},this.moveFunc=e,this.stop=function(){this.alive=0,this.vx=0,this.vy=0},this.dispose=function(){this.alive=0,this.visible=!1,this.living=!1},this.put=function(e,i,s=0,h=1){let o=!0;if(Boolean(A.viewport)){let t=A.viewport.viewtoReal(e,i);e=t.x,i=t.y,o=t.in}o&&(Boolean(n[this.id])?(a(n[this.id].image,n[this.id].pattern[this.pcnt],e,i,s,h),this.count++,this.count>n[this.id].wait&&(this.count=0,this.pcnt++),this.pcnt>n[this.id].pattern.length-1&&(this.pcnt=0)):t.fillText(this.index+" "+this.count,e,i))},this.reset=function(){this.x=0,this.y=0,this.r=0,this.z=0,this.vx=0,this.vy=0,this.priority=0,this.collisionEnable=!0,this.collision={w:0,h:0},this.id="",this.count=0,this.pcnt=0,this.visible=!1,this.hit=[],this.alive=0,this.index=0,this.living=!0,this.normalDrawEnable=!0,this.customDraw=function(A,t){},this.beforeCustomDraw=!1,this.moveFunc=e},this.debug=function(){let A=[];return Object.entries(this).forEach((function(t){let e=String(t).split(","),i=e[0];i.length<13&&(i+=" ".repeat(13),i=i.substring(0,13));let n=e[1].substring(0,15);A.push("."+i+":"+n)})),A.push(""),A.push("Object.entries end."),A}}function a(A,e,i,n,s,h,a){if(Boolean(s)||(s=e.r),Boolean(a)||(a=255),Boolean(h)||(h=1),!e.fv&&!e.fh&&0==s&&255==a)t.drawImgXYWHXYWH(A,e.x,e.y,e.w,e.h,i+-e.w/2*h,n+-e.h/2*h,e.w*h,e.h*h);else{let o=e.fv?-1:1,r=e.fh?-1:1;t.spPut(A,e.x,e.y,e.w,e.h,-e.w/2*h,-e.h/2*h,e.w*h,e.h*h,r,0,0,o,i,n,a,s)}}this.itemCreate=function(A,t=!1,e=0,n=0){const s=new h;let a=i.length;return i.push(s),s.reset(),s.index=a,s.id=A,s.count=0,s.pcnt=0,s.collisionEnable=t,s.collision={w:e,h:n},s},this.itemList=function(){return i},this.itemFlash=function(){i=[]},this.itemIndexRefresh=function(){let A=[];for(let t in i)i[t].living&&A.push(i[t]);for(let t in A)A[t].index=t;return i=A,i},this.manualDraw=function(A=!0){s=!A},this.useScreen=function(i){e=A.screen[i],t=e.buffer},this.setPattern=function(t,e){n[t]={image:A.asset.image[e.image].img,wait:e.wait,pattern:e.pattern}},this.CollisionCheck=function(){let A=[];for(let t in i){let e=i[t];e.living&&e.collisionEnable&&A.push(e)}for(let t in A){let e=A[t];e.hit=[];for(let i in A)if(t!=i){let t=A[i];Math.abs(e.x-t.x)<e.collision.w/2+t.collision.w/2&&Math.abs(e.y-t.y)<e.collision.h/2+t.collision.h/2&&e.hit.push(t)}}};const o=new function(){let A=[];this.add=t=>{A.push(t)},this.sort=()=>{A.sort(((A,t)=>A.priority-t.priority))},this.buffer=()=>A,this.reset=()=>{A=[]}};this.allDrawSprite=function(){if(s){o.reset();for(let A in i){let t=i[A];t.living&&o.add(t)}o.sort();let s=o.buffer();for(let i in s){let h=s[i];if(h.alive>0&&h.moveFunc(A.deltaTime()),h.visible){if(h.beforeCustomDraw&&h.customDraw(A,e),h.normalDrawEnable){let e=h.x,s=h.y,o=!0;if(Boolean(A.viewport)){let t=A.viewport.viewtoReal(e,s);e=t.x,s=t.y,o=t.in}o&&(Boolean(n[h.id])?(a(n[h.id].image,n[h.id].pattern[h.pcnt],e,s,h.r,h.z),h.count++,h.count>n[h.id].wait&&(h.count=0,h.pcnt++),h.pcnt>n[h.id].pattern.length-1&&(h.pcnt=0)):t.fillText(i+" "+h.count,e,s))}h.beforeCustomDraw||h.customDraw(A,e)}}}}}function GameSpriteFontControl(A,t){var e=A.screen[0].buffer;this.useScreen=function(t){e=A.screen[t].buffer};var i=t.Image,n=t.pattern;this.putchr=function(A,t,s,h){var a=!1;Boolean(h)?1!=h&&(a=!0):h=1;for(var o=0,r=A.length;o<r;o++){var l=A.charCodeAt(o);if(l>=32&&l<128){var c=n[l-32],u=t+o*(c.w*h),f=s;a&&(u+=-c.w/2*h,f+=-c.h/2*h),e.drawImgXYWHXYWH(i,c.x,c.y,c.w,c.h,u,f,c.w*h,c.h*h)}}}}function viewport(){let A,t,e,i,n=!0;function s(){this.x=A,this.y=t,this.w=e,this.h=i,this.ix=ix_,this.iy=iy_}A=0,t=0,ix_=0,iy_=0,this.x=0,this.y=0,this.w=e,this.h=i,this.ix=ix_,this.iy=iy_,this.repeat=function(A=!0){n=A},this.size=function(A,t){e=A,i=t,s()},this.setPos=function(e,i){A=e,t=i,s()},this.border=function(A,t){ix_=A,iy_=t,s()},this.viewtoReal=function(s,h){let a=s+A,o=h+t,r=!1;return n&&(a<0&&(a=e+a),a>e&&(a%=e),o<0&&(o=i+o),o>i&&(o%=i)),r=!(a+ix_<0||a>e+ix_||o+iy_<0||o>i+iy_),{x:a,y:o,in:r}}}
    </script>
    <script type="text/javascript">
function GameObj_GradeUpItem(){let t;this.triggerDelay=0,this.mode=0,this.blink=!0,this.barth=!0,this.spriteItem,this.init=function(e){this.triggerDelay=e.time()+250,this.mode=0,this.barth=!0,this.spriteItem.mode=this.mode,this.spriteItem.blink=!0,t=!1,this.spriteItem.normalDrawEnable=!0,this.spriteItem.moveFunc=function(t){let e=t/(1e3/60);this.alive--,this.x+=this.vx*e,this.y+=this.vy*e}},this.step=function(e,i,s){if(this.spriteItem.collisionEnable=!this.barth,this.spriteItem.living?(this.triggerDelay<e.time()&&(this.triggerDelay=e.time()+250,this.mode=this.spriteItem.mode!=this.mode?this.spriteItem.mode:this.mode,this.spriteItem.priority=this.mode,this.blink=!this.blink,this.spriteItem.blink=this.blink,this.barth=!1),t=!1):t||(t=!0),t)return;const r=this.spriteItem.x,n=this.spriteItem.y;this.spriteItem.r;r<32&&(this.spriteItem.x=32),r>1568&&(this.spriteItem.x=1568),n<32&&(this.spriteItem.y=32),n>928&&(this.spriteItem.y=928)},this.draw=function(t){this.spriteItem.living&&this.spriteItem.view()}}function GameObjectEnemy(t){const e=t;this.r=0,this.vr=0,this.x=0,this.y=0,this.vx=0,this.vy=0,this.old_X=0,this.old_y=0,this.triggerDelay=0,this.op={ptr:0,x:Array(40),y:Array(40),r:Array(40)},this.turlet=new function(){const t=e.CHECKPOINT_MAP;let i=function(t){return t.CHECKPOINT_MAP[3]}(e),s=0,r=[];function n(t,e){return Math.sqrt(Math.abs(e.x-t.x)*Math.abs(e.x-t.x)+Math.abs(e.y-t.y)*Math.abs(e.y-t.y))}this.vecToR=function(t,e){return(270+(0==t?e>=0?180:0:Math.atan(e/t)*(180/Math.PI)+(t>=0?90:270)))%360},this.check=function(t){s=(s+360)%360,t>270&&s<90&&(t-=360),s>270&&t<90&&(t+=360);let e=Math.trunc(180+t-s)%360;e>=180&&s++,e<=180&&s--,e>=210&&(s+=2),e<=150&&(s-=2),e>=270&&(s+=3),e<=90&&(s-=3)},this.move=function(t){s=(s+t)%360},this.vector=function(){return s},this.gcheck=function(t,e,s){this.check(function(t,e,s){const r=i;let h=9999,o=-1;for(let t in r){let i=n({x:e,y:s},{x:r[0],y:r[1]});i<=h&&(o=t,h=i)}let a=-1;return-1!=o&&(a=vecToR(e-r[o].x,s-r[o].y)),(a+180)%360}(0,e,s))},this.gdist=function(e,s,h){let o=!1;r=[];for(let i in t){let a=t[i][e];n({x:s,y:h},{x:a[0],y:a[1]})<10?(r.push(!0),o=!0):r.push(!1)}return n({x:s,y:h},{x:i[e][0],y:i[e][1]})},this.guideset=function(t,e,s){return(this.vecToR(e-i[t][0],s-i[t][1])+180)%360},this.laneselect=function(e){return e<0&&(e=0),e>=t.length&&(e=t.length-1),i=t[e],e},this.bordercheck=function(e){let i=!1;if(r[0]||r[t.length-1]){i=!0;for(let e=1;e<t.length-1;e++)r[e]&&(i=!1)}return i}}(e);let i,s={speed:0,charge:0,power:0,maxspeed:0,accel:1};this.status=function(){return s},this.spriteItem;let r,n,h,o,a=!1;this.LAP=function(){return n},this.ResetLAP=function(){h=3,n=0},this.init=function(t,e,o){this.r=0,this.vr=0,this.x=this.spriteItem.x,this.y=this.spriteItem.y,this.old_x=this.x,this.old_y=this.y,this.triggerDelay=0,s.maxspeed=t,s.accel=e,this.spriteItem.mode=0,this.spriteItem.linkedOption=!1,i=!1,a=!1,r=0,h=o,n=0},this.step=function(t,e,l){this.spriteItem.collisionEnable=!0;let p=0,c=-1,u=e.trigger;!e.left&&e.right;u&&(this.triggerDelay<t.time()&&(this.triggerDelay=t.time()+250),p=Math.trunc(3*Math.random())-1,c=Math.trunc(3*Math.random())-1),c<0?s.speed+=.1*s.accel:s.speed-=.01,c>0&&(s.speed-=.1),s.speed>s.maxspeed&&(s.speed=s.maxspeed),s.speed<0&&(s.speed=3,this.spriteItem.collisionEnable=!1);let m=0+s.speed;h=this.turlet.laneselect(h+p),this.turlet.bordercheck(h)&&(s.speed=0),this.r=this.turlet.guideset(r,this.x,this.y);let d=m*Math.cos(Math.PI/180*this.turlet.vector()),f=m*Math.sin(Math.PI/180*this.turlet.vector()),g=!1,y=!!Boolean(this.spriteItem.wall)&&!!this.spriteItem.wall;if(this.spriteItem.living?i=!1:i||(!function(t,e,i,s=0,r=360){for(let n=s;n<r;n+=30)sp=t.sprite.itemCreate("BULLET_E",!0,8,8),sp.pos(e,i,n),sp.move(n,2,30)}(t,this.x,this.y),i=!0,a=!1,s.speed=0,this.old_x=this.x,this.old_y=this.y),g=!!y,g?(this.spriteItem.wall=!1,s.speed-=.2,o++):o=0,i)return;this.turlet.check(this.r),d=(this.old_x-this.x+d)/2,f=(this.old_y-this.y+f)/2,this.old_x=Math.trunc(this.x),this.old_y=Math.trunc(this.y);let A=t.deltaTime()/(1e3/60);this.x=this.x+d*A,this.y=this.y+f*A,this.x<32&&(this.x=32),this.x>1568&&(this.x=1568),this.y<32&&(this.y=32),this.y>928&&(this.y=928),this.turlet.gdist(r,this.x,this.y)<60&&(s.speed-=.5,r++,r%=21,0==r&&n++)},this.draw=function(t){let e=Math.trunc(this.x),i=Math.trunc(this.y);this.spriteItem.pos(e,i,(this.turlet.vector()+90)%360,1),this.spriteItem.view()}}function GameObjectPlayer(t){const e=t;let i,r,n,h,o;this.r=0,this.vr=0,this.x=0,this.y=0,this.vx=0,this.vy=0,this.old_X=0,this.old_y=0,this.triggerDelay=0,this.stickDelay=0,this.op={ptr:0,x:Array(40),y:Array(40),r:Array(40)},this.turlet=new function(){const t=e.CHECKPOINT_MAP;let i=function(t){return t.CHECKPOINT_MAP[3]}(e),s=0,r=[];function n(t,e){return Math.sqrt(Math.abs(e.x-t.x)*Math.abs(e.x-t.x)+Math.abs(e.y-t.y)*Math.abs(e.y-t.y))}this.vecToR=function(t,e){return(270+(0==t?e>=0?180:0:Math.atan(e/t)*(180/Math.PI)+(t>=0?90:270)))%360},this.check=function(t){s=(s+360)%360,t>270&&s<90&&(t-=360),s>270&&t<90&&(t+=360);let e=Math.trunc(180+t-s)%360;e>=180&&s++,e<=180&&s--,e>=210&&(s+=2),e<=150&&(s-=2),e>=270&&(s+=3),e<=90&&(s-=3)},this.move=function(t){s=(s+t)%360},this.vector=function(){return s},this.gcheck=function(t,e,s){this.check(function(t,e,s){const r=i;let h=9999,o=-1;for(let t in r){let i=n({x:e,y:s},{x:r[0],y:r[1]});i<=h&&(o=t,h=i)}let a=-1;return-1!=o&&(a=vecToR(e-r[o].x,s-r[o].y)),(a+180)%360}(0,e,s))},this.gdist=function(e,s,h){let o=!1;r=[];for(let i in t){let a=t[i][e];n({x:s,y:h},{x:a[0],y:a[1]})<10?(r.push(!0),o=!0):r.push(!1)}return n({x:s,y:h},{x:i[e][0],y:i[e][1]})},this.guideset=function(t,e,s){return(this.vecToR(e-i[t][0],s-i[t][1])+180)%360},this.laneselect=function(e){return e<0&&(e=0),e>=t.length&&(e=t.length-1),i=t[e],e},this.bordercheck=function(e){let i=!1;if(r[0]||r[t.length-1]){i=!0;for(let e=1;e<t.length-1;e++)r[e]&&(i=!1)}return i}};let a,l={speed:0,charge:0,power:0};this.status=function(){return l},this.spriteItem;let p,c,u,m,d,f,g,y,A,x,I=!1;function w(t,e,i,s=0,r=360){for(let n=s;n<r;n+=30)sp=t.sprite.itemCreate("BULLET_P",!0,8,8),sp.pos(e,i,n),sp.move(n,2,30)}this.LAP=function(){return y},this.ResetLAP=function(){g=[],A=3,y=0},this.init=function(t){this.r=0,this.vr=0,this.x=this.spriteItem.x,this.y=this.spriteItem.y,this.old_x=this.x,this.old_y=this.y,this.triggerDelay=0,this.stickDelay=0,this.op.ptr=0,this.op.x.fill(this.x),this.op.y.fill(this.y),this.op.r.fill(0),this.spriteItem.mode=0,this.spriteItem.linkedOption=!1,i={sp:t.sprite.itemCreate("FRIEND_P",!0,32,32),re:!1},r={sp:t.sprite.itemCreate("Turlet",!1,32,32),re:!1},n={sp:t.sprite.itemCreate("ARMOR_P",!0,32,32),re:!1},h={sp:t.sprite.itemCreate("ARMOR_P",!0,32,32),re:!1},o={sp:t.sprite.itemCreate("ARMOR_P",!0,32,32),re:!1},a=!1,I=!1,i.sp.dispose(),i.re=!0,r.sp.dispose(),r.re=!0,n.sp.dispose(),n.re=!0,h.sp.dispose(),h.re=!0,o.sp.dispose(),o.re=!0,c=t.beep.makeScore(["C3"],250,.3),m=0,d=[],f=t.time(),g=[];A=3,y=0},this.setNote=function(t){p=t,u=0},this.step=function(t,e,v){this.spriteItem.collisionEnable=!0;let M=e.y,P=e.trigger,b=e.left?-1:e.right?1:0;if(P&&this.triggerDelay<t.time()){this.triggerDelay=t.time()+250;let e=t.sprite.itemCreate(I?"BULLET_P2":"BULLET_P",!0,8,8),r=this.turlet.vector(),n=this.x+16*Math.cos(Math.PI/180*r),h=this.y+16*Math.sin(Math.PI/180*r);e.pos(n,h,0,.6),e.move((r+90)%360,16,120),i.sp.living&&(op=this.op,e=t.sprite.itemCreate("BULLET_P3",!0,8,8),e.pos(op.x[op.ptr%op.x.length],op.y[op.ptr%op.x.length],0,.6),e.move((op.r[op.ptr%op.x.length]+90)%360,6,120)),score=["E5","C5"],s=t.beep.makeScore(score,50,.5),p.play(s,t.time())}M<0?l.speed+=.1:l.speed-=.01,M>0&&(l.speed-=.1),l.speed>30&&(l.speed=30),l.speed<0&&(l.speed=3);let C=0+l.speed;this.stickDelay<t.time()&&(this.stickDelay=t.time()+100,A=this.turlet.laneselect(A-b)),this.turlet.bordercheck(A)&&(l.speed=0),this.r=this.turlet.guideset(m,this.x,this.y);let B=C*Math.cos(Math.PI/180*this.turlet.vector()),S=C*Math.sin(Math.PI/180*this.turlet.vector()),k=!1,E=!!Boolean(this.spriteItem.wall)&&!!this.spriteItem.wall,G=!1,T=!1,R=!1,L=!1;if(this.spriteItem.living?(L=!!Boolean(this.spriteItem.mode)&&0!=this.spriteItem.mode,L&&(0!=(1&this.spriteItem.mode)&&(n.sp.living||(n={sp:t.sprite.itemCreate("ARMOR_P",!0,32,32),re:!1})),0!=(2&this.spriteItem.mode)&&(h.sp.living||(h={sp:t.sprite.itemCreate("ARMOR_P",!0,32,32),re:!1}),o.sp.living||(o={sp:t.sprite.itemCreate("ARMOR_P",!0,32,32),re:!1})),0!=(4&this.spriteItem.mode)&&(i.sp.living||(i={sp:t.sprite.itemCreate("FRIEND_P",!0,32,32),re:!1},r={sp:t.sprite.itemCreate("Turlet",!1,32,32),re:!1})),0!=(8&this.spriteItem.mode)&&(I=!I),this.spriteItem.mode=0),a=!1):(a||(w(t,this.x,this.y),a=!0,i.sp.living&&i.sp.dispose(),n.sp.living&&n.sp.dispose(),h.sp.living&&h.sp.dispose(),o.sp.living&&o.sp.dispose(),I=!1,l.speed=0,B=0,S=0,m=0,d=[],this.old_x=this.x,this.old_y=this.y),l.speed=0,B=0,S=0),i.sp.living?this.spriteItem.linkedOption=!0:(r.sp.living&&r.sp.dispose(),this.spriteItem.linkedOption=!1),n.sp.living&&(G=!!Boolean(n.wall)&&!!n.wall,n.wall=!1),h.sp.living&&(T=!!Boolean(n.wall)&&!!h.wall,h.wall=!1),o.sp.living&&(R=!!Boolean(n.wall)&&!!o.wall,o.wall=!1),k=!!(E||G||T||R),k?(this.spriteItem.wall=!1,l.speed-=.2,x++):x=0,a)return;this.turlet.check(this.r),B=(this.old_x-this.x+B)/2,S=(this.old_y-this.y+S)/2,this.old_x=Math.trunc(this.x),this.old_y=Math.trunc(this.y);let D=t.deltaTime()/(1e3/60);if(this.x=this.x+B*D,this.y=this.y+S*D,this.x<32&&(this.x=32),this.x>1568&&(this.x=1568),this.y<32&&(this.y=32),this.y>928&&(this.y=928),op=this.op,op.x[op.ptr]=Math.trunc(this.x),op.y[op.ptr]=Math.trunc(this.y),op.r[op.ptr]=this.turlet.vector(),op.ptr++,op.ptr=op.ptr%op.x.length,t.time()>u&&(p.busy=!1),p.busy||v.clrf)p.busy&&p.changeFreq(C/2*65);else{for(let t in c){c[t].use=!1}p.play(c,t.time()),u=t.time()+240}if(this.turlet.gdist(m,this.x,this.y)<60){l.speed-=.5,m++,m%=21,d[m]=1;let e=0;for(let t of d)e+=t;if(e>=20){d=[],g.push(Math.trunc(t.time()-f)),f=t.time(),y++;const e=t.beep.makeScore(["E6"],200,.5);p.play(e,t.time())}}t.screen[0].buffer.turn(270-this.turlet.vector())},this.draw=function(t){t.font.std.putchr("LANE:"+A,0,224),t.font.std.putchr("LAP"+y+" "+Math.trunc(t.time()-f)/1e3,0,232);for(let e in g){t.font.std.putchr(""+g[e]/1e3,24,248+8*e)}if(i.sp.living){for(let e=0;e<this.op.x.length-5;e+=3){let i=this.op,s=t.viewport.viewtoReal(i.x[(i.ptr+e)%i.x.length],i.y[(i.ptr+e)%i.x.length]);s.in&&t.screen[0].fill(s.x-2,s.y-2,3,3,"gray")}let e=this.op;i.sp.pos(e.x[e.ptr%e.x.length],e.y[e.ptr%e.x.length],e.r[e.ptr%e.x.length]+90,.8),r.sp.pos(e.x[e.ptr%e.x.length],e.y[e.ptr%e.x.length],e.r[e.ptr%e.x.length]+90,.8),i.sp.view(),r.sp.view()}else i.re||(w(t,op.x[op.ptr%op.x.length],op.y[op.ptr%op.x.length]),r.sp.dispose(),i.re=!0);let e=Math.trunc(this.x),s=Math.trunc(this.y);n.sp.living?(n.sp.pos(Math.trunc(e+20*Math.cos(this.r*(Math.PI/180))),Math.trunc(s+20*Math.sin(this.r*(Math.PI/180))),(this.r+90)%360,1),n.sp.view()):n.re||(w(t,e+20*Math.cos(this.r*(Math.PI/180)),s+20*Math.sin(this.r*(Math.PI/180))),n.re=!0),h.sp.living?(h.sp.pos(Math.trunc(e+20*Math.cos((this.r-90)*(Math.PI/180))),Math.trunc(s+20*Math.sin((this.r-90)*(Math.PI/180))),this.r%360,1),h.sp.view()):h.re||(w(t,e+16*Math.cos((this.r-90)*(Math.PI/180)),s+16*Math.sin((this.r-90)*(Math.PI/180))),h.re=!0),o.sp.living?(o.sp.pos(Math.trunc(e+17*Math.cos((this.r+90)*(Math.PI/180))),Math.trunc(s+17*Math.sin((this.r+90)*(Math.PI/180))),this.r%360,1),o.sp.view()):o.re||(w(t,Math.trunc(e+16*Math.cos((this.r+90)*(Math.PI/180))),Math.trunc(s+16*Math.sin((this.r+90)*(Math.PI/180)))),o.re=!0),this.spriteItem.pos(e,s,(this.turlet.vector()+90)%360,1),this.spriteItem.view()}}function SceneGame(){let t,e,i,r,n,h,o,a,l,p,c,u;const m=new OffscreenCanvas(1600,960),d=m.getContext("2d");function f(){let t,e;this.run=function(){t++},this.set=function(){e=0,t=0},this.check=function(){return t!=e}}this.state=function(){return{ene:a,result:i,time:h,stage:i.stage,score:i.score,delay:r,block:undefined,collision:0,sprite:e.length,clear:i.clrf,gameover:i.govf,dead:i.dedf,status:o.status(),laplist:u}},this.init=function(i){l=new f,t=[],p=new StageControl(i),p.init(),e=i.sprite.itemList(),c=[],i.beep.oscSetup(1),i.beep.lfoReset(),c[0]=i.beep.createNote(1),i.beep.oscSetup(0),i.beep.lfoSetup(10,0,50),c[1]=i.beep.createNote(1),i.beep.oscSetup(1),i.beep.lfoSetup(24,3,20),c[2]=i.beep.createNote(1);for(let t of c)t.on(0);this.reset(i)},this.reset=function(s){p.init(),t=[],s.sprite.itemFlash(),o=new GameObjectPlayer(s),o.spriteItem=s.sprite.itemCreate("Player",!0,28,28),o.spriteItem.pos(640,180),o.init(s),o.setNote(c[1]),t.push(o),p.change(1,t);for(let t in this.spriteTable)e[t].visible=!1;a={now:3,max:3,before:this.now},i={score:0,time:s.time(),stage:1,clrf:!1,govf:!1,dedf:!1},r=0,n=0,s.screen[0].buffer._2DEF(!0),s.screen[0].buffer.turn(0)},this.step=function(n,f,g){h=Math.trunc((n.time()-i.time)/100),n.viewport.setPos(Math.trunc(320-o.spriteItem.x),Math.trunc(240-o.spriteItem.y)),u=[];for(let e of t)if(e.step(n,f,i),e.spriteItem.living&&Boolean(e.LAP)){let t=e.LAP();u.push(t)}if(r<n.time()){r=n.time()+500,a.before=a.now,n.sprite.itemIndexRefresh();let e=0,s=n.sprite.itemList();for(let t of s)"Enemy"==t.id&&e++;let h=!1;for(let t of u)t>4&&(h=!0);if(h&&(u[0]>4?e=0:a.now=0),!o.spriteItem.living)if(i.dedf){if(a.now>0){o.spriteItem=n.sprite.itemCreate("Player",!0,24,24),o.spriteItem.pos(640,180),o.x=640,o.y=180,o.vx=0,o.vy=0,o.old_x=640,o.old_y=180,o.r=0;let t=["G4","C5","E4","C4","A3"],e=n.beep.makeScore(t,100,1);c[0].play(e,n.time())}i.dedf=!1;let e=n.sprite.itemList();for(let t of e)"Enemy"==t.id.substring(0,8)&&t.dispose();p.change(i.stage,t)}else a.now--,i.dedf=!0,r=n.time()+1500;if(i.score>5e3*(a.max-2)){const t=n.sprite.itemCreate("BULLET_P",!1,1,1);t.priority=5,t.normalDrawEnable=!1,t.customDraw=function(t,e){let i=t.viewport.viewtoReal(this.x-28,this.y),s=Math.trunc(i.x),r=Math.trunc(i.y);e.fill(s,r,48,8,"Black"),t.font.std.putchr("Extend.",s,r)},t.pos(o.x,o.y),t.move(0,1,45),a.now++,a.max++;let e=["G5","C6","E6","C6","D6","G6"],i=n.beep.makeScore(e,100,1);c[0].play(i,n.time())}if(0==e)if(i.clrf){i.time=n.time(),i.stage++;let e=[];for(let i in t)t[i].spriteItem.living&&("Enemy"==t[i].spriteItem.id&&t[i].ResetLAP(),e.push(t[i]));t=e,o.ResetLAP(),p.change(i.stage,t);let s=n.sprite.itemList();for(let t of s)"BULLET_P"==t.id.substring(0,8)&&t.dispose(),"BULLET_E"==t.id.substring(0,8)&&t.dispose()}else{i.clrf=!0,r=n.time()+3e3;let t=["G4","C5","E5","G5","G5"],e=n.beep.makeScore(t,100,1);c[0].play(e,n.time())}else i.clrf=!1;if(a.now<=0){r=n.time()+3e3,a.now=0,i.govf=!0;let t=["F4","E4","D4","C4","B3","B#3","C4"],e=n.beep.makeScore(t,150,1);c[0].play(e,n.time())}}var y;d.clearRect(0,0,m.width,m.height),(y=d).beginPath(),y.globalAlpha=1,y.strokeStyle="gray",y.lineWidth=12,y.arc(112,48,30,.5*Math.PI,1.5*Math.PI,!0),y.arc(48,48,30,1.5*Math.PI,.5*Math.PI,!0),y.moveTo(112,78),y.lineTo(48,78),y.stroke(),n.sprite.CollisionCheck(),e=n.sprite.itemList();for(let r in e){let h=e[r];if(h.living&&(h.collisionEnable&&h.visible)){if("Player"==h.id){let t=h.hit;for(let e in t){let r=t[e];r.visible&&("Enemy"==r.id&&(h.dispose(),r.dispose(),score=["E4","D4","C4","B3"],s=n.beep.makeScore(score,50,1),c[2].play(s,n.time())),"Player"==h.id&&"POWERUP"==r.id&&(r.mode>0&&(Boolean(h.mode)&&isNaN(h.mode)?h.mode+=Math.pow(2,r.mode-1):h.mode=Math.pow(2,r.mode-1)),i.score+=0==r.mode?300:0,r.dispose(),score=["C6","C5"],s=n.beep.makeScore(score,50,1),c[0].play(s,n.time())))}d.beginPath(),d.fillStyle="white",d.fillRect(h.x/10,h.y/10,2,2)}if("Enemy"==h.id){let e=h.hit;for(let r in e){let o=e[r];if(o.visible&&"BULLET_P"==o.id.substring(0,8)){let e=new GameObj_GradeUpItem;e.spriteItem=n.sprite.itemCreate("POWERUP",!1,28,16),e.spriteItem.pos(h.x,h.y,0,.5),e.init(n),t.push(e),h.dispose(),o.dispose(),i.score+=10,score=["A3","A2"],s=n.beep.makeScore(score,50,1),c[2].play(s,n.time());break}}d.beginPath(),d.fillStyle="red",d.fillRect(h.x/10,h.y/10,2,2)}}}!function(t){for(let e in t){let i=t[e];(i.x<0||i.x>1600||i.y<0||i.y>960)&&((i.x<0||i.x>1600)&&i.dispose(),(i.y<0||i.y>960)&&i.dispose())}}(n.sprite.itemList()),p.step(n,f,i),l.run()},this.draw=function(e){l.check();p.draw(e);const s=e.viewport.viewtoReal;if(1){let t=e.sprite.itemList();for(let i in t)if("BULLET"==t[i].id.substring(0,6)){let r=s(t[i].x,t[i].y),n=r.x,h=r.y;r.in&&e.screen[0].fill(n-t[i].collision.w/2,h-t[i].collision.h/2,t[i].collision.w,t[i].collision.h,"BROWN")}}if(!i.govf)for(let i of t)i.draw(e);e.screen[1].putImage(m,480,330),l.set()}}class GameTask_Main extends GameTask{_x=0;_y=0;_sm={};_dtt=0;_result;_titlef;titlewait;_wh=0;scene;_dv;note;constructor(t){super(t)}pre(t){this.scene=[],this.scene.Game=new SceneGame,this.scene.UI=new SceneGameUI,this.scene.Debug=new SceneDebug,this.scene.Result=new SceneResult,this.scene.GameOver=new SceneGameOver,this.scene.Title=new SceneTitle,this.scene.Gpad=new SceneGPad,this.scene.VGpad=new SceneVGPad,t.sprite.useScreen(0),t.font.std.useScreen(1),t.sprite.setPattern("Player",{image:"SPGraph",wait:0,pattern:[{x:0,y:0,w:32,h:32,r:0,fv:!1,fh:!1}]}),t.sprite.setPattern("BULLET_P",{image:"SPGraph",wait:0,pattern:[{x:48,y:48,w:8,h:32,r:0,fv:!1,fh:!1}]}),t.sprite.setPattern("BULLET_P2",{image:"SPGraph",wait:0,pattern:[{x:16,y:16,w:8,h:32,r:0,fv:!1,fh:!1}]}),t.sprite.setPattern("BULLET_P3",{image:"SPGraph",wait:0,pattern:[{x:48,y:48,w:8,h:8,r:0,fv:!1,fh:!1}]}),t.sprite.setPattern("Enemy",{image:"SPGraph",wait:0,pattern:[{x:0,y:32,w:32,h:32,r:0,fv:!1,fh:!1}]}),t.sprite.setPattern("BULLET_E",{image:"SPGraph",wait:0,pattern:[{x:48,y:48,w:4,h:16,r:0,fv:!1,fh:!1}]}),t.sprite.setPattern("POWERUP",{image:"SPGraph",wait:0,pattern:[{x:32,y:32,w:32,h:32,r:0,fv:!1,fh:!1}]}),this.scene.Game.init(t),this._initGame(t),this._sm={x:0,y:0,old_x:0,old_y:0},t.beep.oscSetup(1),t.beep.lfoReset(),this.note=t.beep.createNote(1),this.note.on(0);let e=t.beep.makeScore(["C5","C6"],100,.1);this.note.play(e,t.time()+250)}_initGame(t){this.scene.Game.reset(t),this._titlef=!0,this.titlewait=t.time()+1e3}step(t){let e=t.keyboard.check(),i=!1;Boolean(e[65])&&e[65]&&(i=!0);let s=!1;Boolean(e[68])&&e[68]&&(s=!0);let r=!1;Boolean(e[87])&&e[87]&&(r=!0);let n=!1;Boolean(e[83])&&e[83]&&(n=!0);let h=!1;Boolean(e[81])&&e[81]&&(h=!0);let o=!1;Boolean(e[69])&&e[69]&&(o=!0);let a=!1;Boolean(e[38])&&e[38]&&(a=!0);let l=!1;Boolean(e[40])&&e[40]&&(l=!0);let p=!1;Boolean(e[37])&&e[37]&&(p=!0);let c=!1;Boolean(e[39])&&e[39]&&(c=!0);let u=!1;Boolean(e[32])&&e[32]&&(u=!0);let m=!1;Boolean(e[90])&&e[90]&&(m=!0);let d=!1;Boolean(e[36])&&e[36]&&(d=!0);let f=!1;Boolean(e[80])&&e[80]&&(f=!0);let g=t.gamepad.check(),y=t.gamepad.btn_lb,A=t.gamepad.btn_rb,x=t.gamepad.btn_a,I=t.gamepad.btn_x,w=t.gamepad.btn_back,v=t.gamepad.r,M=t.gamepad.axes;a=!(!a&&!r),l=!(!l&&!n),p=!(!p&&!i),c=!(!c&&!s),!(!d&&!w)&&(document.fullscreenElement||t.systemCanvas.requestFullscreen());let P=t.vgamepad.check(),b=!1;Boolean(P.button[0])&&P.button[0]&&(b=!0);let C=!1;Boolean(P.button[1])&&P.button[1]&&(C=!0);let B=!1;Boolean(P.button[2])&&P.button[2]&&(B=!0);let S=!1;if(Boolean(P.button[3])&&P.button[3]&&(S=!0),g&&-1!=v)this._x=M[0],this._y=M[1];else if(-1!=P.distance){let t=(P.deg-90)*(Math.PI/180);this._x=Math.cos(t),this._y=Math.sin(t)}else this._x=p?-1:c?1:0,this._y=a?-1:l?1:0;let k=y||m||h||b,E=A||m||o||C,G=x||I||u||S,T={x:this._x,y:this._y,trigger:G,left:k,right:E,keycode:e},R=this.scene.Game.state();if(this._result=R.result,this._titlef){if(R.block=0,R.sprite=0,this.scene.Title.step(t,T,{delay:this.titlewait})){this._titlef=!1;let e=["C4","C3","C4","G4","A0","C5"],i=t.beep.makeScore(e,150,1);this.note.play(i,t.time())}}else R.gameover?this.scene.GameOver.step(t,T,R)&&this._initGame(t):this.scene.Game.step(t,T);this._result.clrf&&this.scene.Result.step(t,T),this.scene.UI.step(t,T,R),this.scene.Debug.step(t,T,R),this._dv=!!f,this._dv&&this.scene.Gpad.step(t,T,R),this.scene.VGpad.step(t,T,R)}draw(t){this._titlef||this.scene.Game.draw(t),this._titlef||this.scene.UI.draw(t),this._dv&&this.scene.Debug.draw(t),this._result.clrf&&this.scene.Result.draw(t),this._result.govf&&this.scene.GameOver.draw(t),this._titlef&&this.scene.Title.draw(t),this._dv&&this.scene.Gpad.draw(t),this.scene.VGpad.draw(t)}}function main(){const t=new GameCore({canvasId:"layer0",screen:[{resolution:{w:640,h:480,x:0,y:0}},{resolution:{w:640,h:480,x:0,y:0}}]});pictdata(t);const e=SpriteFontData();for(let i in e)t.setSpFont(e[i]);t.task.add(new GameTask_Main("main")),t.screen[0].setBackgroundcolor("black"),t.screen[0].setInterval(1),t.viewport=new viewport,t.viewport.size(640,480),t.viewport.border(320,240),t.viewport.repeat(!1),t.run()}function SpriteFontData(){let t=[];for(let e=0;e<7;e++)for(j=0;j<16;j++)ptn={x:12*j,y:16*e,w:12,h:16},t.push(ptn);let e=[],i=["white","red","green","blue"];for(let t=0;t<=3;t++){let s=[];for(let t=0;t<7;t++)for(let e=0;e<16;e++)ptn={x:6*e,y:8*t+16,w:6,h:8},s.push(ptn);e[i[t]]=s}return[{name:"std",id:"ASCII",pattern:e.white},{name:"8x8red",id:"ASCII",pattern:e.red},{name:"8x8green",id:"ASCII",pattern:e.green},{name:"8x8blue",id:"ASCII",pattern:e.blue},{name:"8x8white",id:"ASCII",pattern:e.white}]}function pictdata(t){t.asset.imageLoad("ASCII","data:image/png;base64,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"),t.asset.imageLoad("SPGraph","data:image/png;base64,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")}function SceneGameUI(){let t,e,i,s,r;this.step=function(n,h,o){t=o.ene,e=o.result,i=o.time,s=o.status.speed,r=o.laplist},this.draw=function(i){let n="";for(let e=1;e<t.now;e++)n+="A";i.font.std.putchr("PLAYER:"+n,0,448),i.font.std.putchr("STAGE :"+e.stage+" SCORE:"+Math.trunc(e.score),0,456),i.screen[1].fill(0,240,16,200,"yellowgreen"),i.screen[1].fill(1,241,14,198-s/30*198,"black"),i.font.std.putchr("SPEED:"+Math.trunc(s),0,440),Boolean(r)&&i.screen[1].fill(0,48,48,8*r.length,"black");for(let t in r)i.font.std.putchr(t+" LAP:"+r[t],0,48+8*t)}}function SceneResult(){this.step=function(t,e){},this.draw=function(t){t.screen[1].fill(211,152,198,24,"black"),t.font.std.putchr("STAGE CLEAR",220,164,3),t.font.std.putchr("STAGE CLEAR",320,464)}}function SceneTitle(){let t;const e=["Thema  Spin/Roll (Donichi thread16)","","     OVAL RUN","","","","","","           START SPACE KEY","                     or GamePad Button X/A","","","","[Method of Operation]","STEERING  : Q,E or GamePad Button L/R","ACCELE    : W key or GamePad LeftAnalogStick UP","BLAKE     : S key or GamePad LeftAnalogStick DOWN","SHOT      : SPACE key or GamePad Button X/A"];this.step=function(e,i,s){t=i,delay=s.delay-e.time()<0;let r=!1;return delay&&i.trigger&&(r=!0),r},this.draw=function(t){for(let i in e)t.font.std.putchr(e[i],160,140+8*i)}}function SceneGameOver(){let t,e,i;this.step=function(s,r,n){if(t=n.stage,e=Math.trunc(n.score),i=n.delay-s.time()<0,i&&(s.sprite.itemFlash(),r.trigger))return!0},this.draw=function(t){t.screen[1].fill(208,152,216,32,"black"),t.font.std.putchr("GAME OVER",220,168,4),t.font.std.putchr(":"+(i?"OK":"WAIT"),320,456)}}function SceneDebug(){let t,e,i,s,r;this.step=function(n,h,o){t=o.block,e=n.deltaTime().toString().substring(0,5),i=o.collision,s=o.sprite,r=h},this.draw=function(t){t.font["8x8white"].putchr("DeltaT:"+e,540,0);let i=0!=r.x?r.x>0?"R":"L":"-",s=0!=r.y?r.y>0?"D":"U":"-",n=r.trigger?"T":"-",h=r.right?"S":"-";t.font["8x8green"].putchr("Input:"+s+":"+i+":"+n+":"+h,540,16)}}function SceneGPad(){let t;this.step=function(e,i,s){t=e.gamepad.infodraw();let r=i.keycode,n="";for(let t in r)Boolean(r[t])&&(n+="["+t+"]");t.push(""),t.push("[Keyboard]"),t.push(n)},this.draw=function(e){for(let i in t)e.font.std.putchr(t[i],0,48+8*i)}}function SceneVGPad(){let t;this.step=function(e,i,s){let r=e.vgamepad.check();t=[],t.push("state button:"+r.button),t.push("state deg   :"+r.deg),t.push("state distance:"+r.distance)},this.draw=function(e){e.vgamepad.draw(e.screen[1]);let i={draw:function(t){t.globalAlpha=1}};e.screen[0].putFunc(i);for(let e in t);}}function StageControl(t){let e;const i=new OffscreenCanvas(1600,960),s=i.getContext("2d");let r=t;this.init=function(){e=1;const t=mapImageCreate(s);r.CHECKPOINT_MAP=t},this.change=function(t,i){e=t;for(let t=1;t<7;t++){let s=new GameObjectEnemy(r);s.spriteItem=r.sprite.itemCreate("Enemy",!0,28,28),s.spriteItem.pos(800-32*t,100),s.init(8+2*t+e,(15-t)/10,t),i.push(s)}},this.step=function(t,e,i){let r=t.sprite.itemList();for(let t in r){let e=r[t],i=r[t];if(!i.living)continue;if(!i.collisionEnable)continue;if(!i.visible)continue;let n=e.collision.w,h=e.collision.h;if("Player"==e.id){let t=s.getImageData(e.x-n/2,e.y-h/2,n,h);c=0;for(let e=1;e<t.data.length;e+=4)c+=0!=t.data[e]?0:1;0!=c&&(e.wall=!0)}}},this.draw=function(t){let e=(0,t.viewport.viewtoReal)(0,0);t.screen[0].putImage(i,e.x,e.y)}}function mapImageCreate(t){t.fillStyle="blue",t.fillRect(0,0,1600,960);for(let e=0;e<1600;e+=100)t.beginPath(),t.strokeStyle="black",t.lineWidth=1,t.moveTo(e,0),t.lineTo(e,960),t.stroke();t.beginPath(),t.globalAlpha=1,t.strokeStyle="black",t.lineWidth=124,t.arc(1120,480,300,.5*Math.PI,1.5*Math.PI,!0),t.arc(480,480,300,1.5*Math.PI,.5*Math.PI,!0),t.moveTo(1120,780),t.lineTo(480,780),t.stroke(),t.beginPath(),t.globalAlpha=1,t.strokeStyle="white",t.lineWidth=120,t.arc(1120,480,300,.5*Math.PI,1.5*Math.PI,!0),t.arc(480,480,300,1.5*Math.PI,.5*Math.PI,!0),t.moveTo(1120,780),t.lineTo(480,780),t.stroke();const e=[];for(let i=-3;i<4;i++){const s=mapGuideMarkerCreate(20*i);e.push(s);for(let e in s)if(0==e||e==s.length-1){t.beginPath(),t.fillStyle="lightgray",t.globalAlpha=1,t.arc(s[e][0],s[e][1],10,0,2*Math.PI,!0),t.fill(),t.font="12px serif",t.fillStyle="Gray",t.globalAlpha=1;let r=i+3;t.fillText(""+r,s[e][0]-4,s[e][1]+4)}t.beginPath(),t.strokeStyle="gray",t.lineWidth=1,t.arc(1120,480,300+20*i,.5*Math.PI,1.5*Math.PI,!0),t.arc(480,480,300+20*i,1.5*Math.PI,.5*Math.PI,!0),t.moveTo(1120,780+20*i),t.lineTo(480,780+20*i),t.stroke()}return e}function mapGuideMarkerCreate(t){const e=300+t,i=[[800,480-e]];for(let t=-90;t<=90;t+=22.5){let s=1120+Math.cos(Math.PI/180*t)*e,r=480+Math.sin(Math.PI/180*t)*e;i.push([s,r])}i.push([800,480+e]);for(let t=90;t<=270;t+=22.5){let s=480+Math.cos(Math.PI/180*t)*e,r=480+Math.sin(Math.PI/180*t)*e;i.push([s,r])}return i.push([660,480-e]),i}
    </script>
    <script type="text/javascript">
        function autorun(){
            document.getElementById("layer0").style.display = "none";
        }
    
        function page_start(){
    
            document.getElementById("layer0").style.display = "";
            document.getElementById("btn").style.display = "none";
            document.getElementById("message").style.display = "none";
            main();
        }
        </script>
    <title>OVALRUN_dnc_th16</title>
    <style>
        * {
            margin:0; padding:0;
        } 
        .resizeimage * { width: 100%; }
    </style>
</head>
<body onload="autorun()">
    <canvas id="layer0" oncontextmenu="return false;">
    layer-0
    </canvas>
    <div id="message">
          /(16)<br>
		OVAL RUN<br>
        <br>
        []<br>
        STEALLING : Q,Ekey or GamePad Button L/R<br>
		ACCELL    : W or GamePad <br>
        BLAKE     : S or GamePad <br>
		SHOT      : SPACE or GamePad Button X/A<br>
        <br>
        :HomeBACK<br>
		<br>
        <br>
        <br>
        5<br>
        <br>
        5<br>
        <br>
        <br>
        <br>
        <br>
        Button Click to Start<br>
    </div>
    <input type="button" id="btn" value="GAME START" onclick="page_start()">
</body>
</html>